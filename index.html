<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GreenBeauty â€” ì§€ì†ê°€ëŠ¥í•œ ë©”ì´í¬ì—… ì¶”ì²œ</title>
  <style>
    /* Reset / ê¸°ë³¸ */
    :root{
      --soft-bg: #fbf7f3;
      --card-bg: #fff;
      --accent: #3b7a57;
      --muted: #6b6b6b;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "ë§‘ì€ ê³ ë”•", sans-serif;background:linear-gradient(180deg,var(--soft-bg),#f3f8f2);color:#222}
    a{color:inherit}
    .wrap{max-width:1100px;margin:24px auto;padding:20px}

    /* í—¤ë” */
    header{display:flex;gap:16px;align-items:center;margin-bottom:18px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo .icon{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,#e9f5ee,#f3fff6);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:22px}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:14px}

    /* ë ˆì´ì•„ì›ƒ ê·¸ë¦¬ë“œ */
    .grid{display:grid;grid-template-columns:1fr;gap:18px}
    @media(min-width:900px){ .grid{grid-template-columns: 1fr 360px} }

    /* ì¹´ë“œ */
    .card{background:var(--card-bg);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(15,30,20,0.06)}
    .section-title{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .section-title h2{margin:0;font-size:16px}
    .muted{color:var(--muted);font-size:13px}

    /* AI form */
    .form-row{display:flex;gap:8px;flex-wrap:wrap}
    label{font-size:13px;color:#333}
    select,input[type="text"],input[type="number"]{padding:8px;border-radius:8px;border:1px solid #eee;min-width:120px}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(59,122,87,0.14)}

    /* product list */
    .products{display:grid;grid-template-columns:1fr;gap:10px}
    @media(min-width:520px){ .products{grid-template-columns:1fr 1fr} }
    .product{display:flex;gap:12px;align-items:flex-start;padding:10px;border-radius:10px;border:1px solid #f0f0f0}
    .p-thumb{width:64px;height:64px;border-radius:8px;background:linear-gradient(135deg,#fff,#f6fff6);display:flex;align-items:center;justify-content:center;font-weight:700}
    .p-meta h3{margin:0;font-size:15px}
    .p-meta p{margin:4px 0 0 0;color:var(--muted);font-size:13px}
    .env-score{margin-left:auto;font-weight:700;padding:6px 8px;border-radius:10px;background:rgba(59,122,87,0.08);color:var(--accent);font-size:13px}

    /* info cards */
    .tips{display:flex;flex-direction:column;gap:8px}
    .tip{padding:10px;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfffb);border:1px solid #f2f6f2}

    /* challenge */
    .challenge{display:flex;gap:10px;align-items:center}
    .chip{background:var(--glass);padding:8px 10px;border-radius:999px;font-weight:600}

    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* small helpers */
    .small{font-size:13px;color:var(--muted)}
    .center{display:flex;align-items:center;justify-content:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <div class="icon">GB</div>
        <div>
          <h1>GreenBeauty</h1>
          <p class="lead">ì•„ë¦„ë‹¤ì›€ê³¼ ì§€êµ¬ë¥¼ í•¨ê»˜ ì§€í‚¤ëŠ” ì¹œí™˜ê²½ ë©”ì´í¬ì—… í”Œë«í¼</p>
        </div>
      </div>
    </header>

    <main class="grid">
      <!-- ë©”ì¸ ì»¬ëŸ¼ -->
      <section class="card">
        <div class="section-title">
          <h2>AI ì¹œí™˜ê²½ ë©”ì´í¬ì—… ì¶”ì²œ</h2>
          <span class="small">ê°„ë‹¨í•œ ì •ë³´ë¡œ ê¼­ í•„ìš”í•œ ì œí’ˆë§Œ ì¶”ì²œí•´ì¤˜ìš”</span>
        </div>

        <!-- AI ì…ë ¥ í¼ -->
        <form id="aiForm" onsubmit="return false;">
          <div class="form-row" style="margin-bottom:10px">
            <label>
              <div class="small">í”¼ë¶€ í†¤</div>
              <select id="skinTone" aria-label="í”¼ë¶€ í†¤">
                <option value="cool">ì¿¨í†¤</option>
                <option value="neutral" selected>ì¤‘ì„±</option>
                <option value="warm">ì›œí†¤</option>
              </select>
            </label>

            <label>
              <div class="small">í”¼ë¶€ íƒ€ì…</div>
              <select id="skinType" aria-label="í”¼ë¶€ íƒ€ì…">
                <option value="normal">ë³´í†µ</option>
                <option value="dry">ê±´ì„±</option>
                <option value="oily">ì§€ì„±</option>
                <option value="sensitive">ë¯¼ê°</option>
              </select>
            </label>

            <label>
              <div class="small">ì§€ì—­ ê¸°í›„</div>
              <select id="climate" aria-label="ê¸°í›„">
                <option value="temperate" selected>ì˜¨ëŒ€</option>
                <option value="humid">ìŠµí•¨</option>
                <option value="dry">ê±´ì¡°</option>
                <option value="cold">ì¶”ì›€</option>
              </select>
            </label>

            <label style="flex:1">
              <div class="small">ì„ í˜¸ ìƒ‰ìƒ(ì˜ˆ: ë ˆë“œ, í”¼ì¹˜, ëˆ„ë“œ)</div>
              <input id="favoriteColor" type="text" placeholder="ì˜ˆ: ëˆ„ë“œ, ì½”ë„" />
            </label>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" id="recommendBtn">ì¶”ì²œ ë°›ê¸°</button>
            <button class="btn ghost" id="sampleBtn" type="button">ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ</button>
            <span class="small">â€» ì¶”ì²œì€ ê·œì¹™ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.</span>
          </div>
        </form>

        <!-- ì¶”ì²œ ê²°ê³¼ -->
        <div id="results" style="margin-top:16px">
          <div class="muted" id="resultNote">ì¶”ì²œ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
          <div class="products" id="productList" style="margin-top:10px"></div>
        </div>

        <!-- ì¶”ê°€ ì„¤ëª… -->
        <div style="margin-top:14px" class="small">
          <strong>í™˜ê²½ ì ìˆ˜</strong>ëŠ” í¬ì¥(ë¦¬í•„ ê°€ëŠ¥ì„±), ì›ë£Œ(ì²œì—°/í•©ì„± ë¹„ì¤‘), ì œì¡°ì‚¬ì˜ ì§€ì†ê°€ëŠ¥ì„± ì •ì±…ì„ ë‹¨ìˆœ í•©ì‚°í•´ ì‹œë®¬ë ˆì´ì…˜í•œ ê°’ì…ë‹ˆë‹¤.
        </div>
      </section>

      <!-- ì‚¬ì´ë“œ ì»¬ëŸ¼ -->
      <aside>
        <div class="card" style="margin-bottom:14px">
          <div class="section-title">
            <h2>í™˜ê²½ ì§€ì‹</h2>
            <span class="small">í´ë Œì§• & í¬ì¥ ê´€ë ¨ í•µì‹¬</span>
          </div>
          <div class="tips">
            <div class="tip">
              <strong>í´ë Œì§• ì‹œ ìœ ì˜ì </strong>
              <div class="small">ë¯¸ì„¸í”Œë¼ìŠ¤í‹±ì´ í¬í•¨ëœ í´ë Œì§• ì œí’ˆì€ í•˜ìˆ˜ë¡œ í˜ëŸ¬ ìƒíƒœê³„ì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤. ì‹ë¬¼ì„± ì˜¤ì¼ì´ë‚˜ ìƒë¶„í•´ì„± ì„±ë¶„ ì œí’ˆì„ ì¶”ì²œí•©ë‹ˆë‹¤.</div>
            </div>
            <div class="tip">
              <strong>í¬ì¥ ì¤„ì´ê¸° íŒ</strong>
              <div class="small">ë¦¬í•„í˜• ì œí’ˆ ì‚¬ìš©, ë¹„ì–´ìˆëŠ” ìš©ê¸° ì¬í™œìš©, ì†Œìš©ëŸ‰ ìƒ˜í”Œë¡œ í…ŒìŠ¤íŠ¸ í›„ ì •í’ˆ êµ¬ë§¤ ë“±ìœ¼ë¡œ ë‚­ë¹„ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            </div>
            <div class="tip">
              <strong>ë©”ì´í¬ì—… ì „ê³µ í™œìš©</strong>
              <div class="small">ìƒ‰ì±„í•™ìœ¼ë¡œ ìµœì†Œí•œì˜ ì œí’ˆ(ë©€í‹°ìœ ì¦ˆ) ì„¤ê³„, ì¬ë£Œí•™ìœ¼ë¡œ ì²œì—° ì•ˆë£Œ ì—°êµ¬ ë“±ì— ê¸°ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            </div>
          </div>
        </div>

        <div class="card" style="margin-bottom:14px">
          <div class="section-title">
            <h2>ë‚˜ì˜ ê·¸ë¦° ì±Œë¦°ì§€</h2>
            <span class="small">ì‘ì€ ì‹¤ì²œì´ í° ì°¨ì´ë¥¼ ë§Œë“¤ì–´ìš”</span>
          </div>

          <div>
            <div class="challenge" style="margin-bottom:10px">
              <input id="challengeInput" placeholder="ì˜ˆ: ì¼íšŒìš© í´ë Œì§• í‹°ìŠˆ ì¤„ì´ê¸°" style="flex:1;padding:8px;border-radius:8px;border:1px solid #eee" />
              <button class="btn" id="saveChallenge">ì €ì¥</button>
            </div>
            <div id="challengeList" class="small"></div>
            <div style="margin-top:10px">
              <button id="clearChallenges" class="btn ghost" style="width:100%">ëª¨ë‘ ì´ˆê¸°í™”</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="section-title">
            <h2>í”„ë¡œì íŠ¸ ìš”ì•½</h2>
            <span class="small">ì›¹í˜ì´ì§€ êµ¬ì„±(ë©”ì¸í™”ë©´, ì„¹ì…˜, ì¸í„°ë™ì…˜)</span>
          </div>
          <div class="small">
            <ul>
              <li>ë©”ì¸: GreenBeauty ì†Œê°œ ë° AI ì¶”ì²œ ë²„íŠ¼</li>
              <li>AI ì¶”ì²œ: ì‚¬ìš©ì ì…ë ¥ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜ ì¶”ì²œ</li>
              <li>ì •ë³´: í™˜ê²½ íŒ ë° ë©”ì´í¬ì—… ì „ê³µ ê¸°ì—¬ ì„¤ëª…</li>
              <li>ì±Œë¦°ì§€: ê°œì¸ ì‹¤ì²œ ê¸°ë¡(ë¡œì»¬ ì €ì¥)</li>
            </ul>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      <div>GreenBeauty â€” ì§€ì†ê°€ëŠ¥í•œ ë·°í‹°ë¥¼ ìœ„í•´ | ì œì‘ì: (ì´ë¦„) Â· í•™êµëª…</div>
      <div style="margin-top:6px" class="small">â€» ì´ ì›¹í˜ì´ì§€ëŠ” êµìœ¡ìš© ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ AI ì—°ë™ì€ ë³„ë„ ì„œë²„/ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.</div>
    </footer>
  </div>

  <script>
    // ìƒ˜í”Œ ì œí’ˆ ë°ì´í„° (ì‹œë®¬ë ˆì´ì…˜)
    const PRODUCTS = [
      { id:1, name:"ì—ì½” ë¦½ë°¤ (ì‹ë¬¼ì„±)", tone:["warm","neutral"], type:["normal","dry","sensitive"], climates:["temperate","cold"], score:92, desc:"ì²œì—° ì™ìŠ¤ì™€ ì˜¤ì¼, ë¦¬í•„ ìš©ê¸° ì œê³µ" },
      { id:2, name:"ë¦¬í•„ íŒŒìš´ë°ì´ì…˜ (ë©€í‹°ìœ ì¦ˆ)", tone:["neutral","cool"], type:["normal","oily"], climates:["temperate","humid","dry"], score:88, desc:"ë‹¤ìš©ë„ í…ìŠ¤ì²˜ë¡œ ë¦½+ì¹˜í¬ ì‚¬ìš© ê°€ëŠ¥" },
      { id:3, name:"ë¹„ê±´ ì•„ì´ì„€ë„ìš° íŒ”ë ˆíŠ¸", tone:["cool","neutral","warm"], type:["normal","sensitive"], climates:["temperate"], score:80, desc:"ì‹ë¬¼ì„± ì•ˆë£Œ ì‚¬ìš©" },
      { id:4, name:"ì˜¤ì¼ ê¸°ë°˜ í´ë Œì ¸ (ìƒë¶„í•´)", tone:["neutral"], type:["dry","sensitive"], climates:["dry","cold"], score:95, desc:"ë¯¸ì„¸í”Œë¼ìŠ¤í‹± ë¬´ì²¨ê°€, ì ì€ ë¬¼ë¡œë„ ì„¸ì •ë ¥ ìš°ìˆ˜" },
      { id:5, name:"ì œë¡œì›¨ì´ìŠ¤íŠ¸ ë¸ŒëŸ¬ì‰¬", tone:[], type:[], climates:[], score:70, desc:"ëŒ€ë‚˜ë¬´ ì†ì¡ì´ì™€ ì¬í™œìš© ê°€ëŠ¥í•œ í¬ì¥" }
    ];

    // DOM
    const recommendBtn = document.getElementById('recommendBtn');
    const sampleBtn = document.getElementById('sampleBtn');
    const productList = document.getElementById('productList');
    const resultNote = document.getElementById('resultNote');

    // ì±Œë¦°ì§€ ê´€ë ¨
    const challengeInput = document.getElementById('challengeInput');
    const saveChallenge = document.getElementById('saveChallenge');
    const challengeList = document.getElementById('challengeList');
    const clearChallenges = document.getElementById('clearChallenges');

    // ìœ í‹¸: ë¡œì»¬ ì €ì¥
    function loadChallenges(){
      const data = JSON.parse(localStorage.getItem('gb_challenges') || '[]');
      renderChallenges(data);
    }
    function renderChallenges(list){
      if(list.length===0){
        challengeList.innerHTML = '<div class="muted">ì €ì¥ëœ ì±Œë¦°ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
      }
      challengeList.innerHTML = '<ol style="padding-left:16px;margin:6px 0">'+list.map(s=>`<li>${escapeHtml(s)}</li>`).join('')+'</ol>';
    }
    function saveChallengeToStorage(text){
      if(!text) return;
      const data = JSON.parse(localStorage.getItem('gb_challenges') || '[]');
      data.push(text);
      localStorage.setItem('gb_challenges', JSON.stringify(data));
      renderChallenges(data);
    }
    clearChallenges.addEventListener('click',()=>{
      if(confirm('ëª¨ë“  ì±Œë¦°ì§€ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ì–´ìš”?')) {
        localStorage.removeItem('gb_challenges');
        loadChallenges();
      }
    });
    saveChallenge.addEventListener('click',()=>{
      const v = challengeInput.value.trim();
      if(!v){ alert('ì±Œë¦°ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); return; }
      saveChallengeToStorage(v);
      challengeInput.value = '';
    });
    loadChallenges();

    // ì¶”ì²œ ë¡œì§ (ê·œì¹™ ê¸°ë°˜ ì‹œë®¬ë ˆì´ì…˜)
    function recommend(){
      const skinTone = document.getElementById('skinTone').value;
      const skinType = document.getElementById('skinType').value;
      const climate = document.getElementById('climate').value;
      const fav = (document.getElementById('favoriteColor').value || '').toLowerCase();

      // ì ìˆ˜ ê¸°ë°˜ í•„í„°ë§ & ë§¤ì¹­
      const scored = PRODUCTS.map(p=>{
        let score = p.score;
        // í†¤ ë§¤ì¹­ ë³´ë„ˆìŠ¤
        if(p.tone.length===0 || p.tone.includes(skinTone)) score += 4;
        // íƒ€ì…ê³¼ ê¸°í›„ ë§¤ì¹­
        if(p.type.length===0 || p.type.includes(skinType)) score += 3;
        if(p.climates.length===0 || p.climates.includes(climate)) score += 2;

        // ì„ í˜¸ ìƒ‰ìƒ ë‹¨ìˆœ í‚¤ì›Œë“œ ë§¤ì¹­ (ìƒí’ˆëª…/desc)
        if(fav && (p.name.toLowerCase().includes(fav) || p.desc.toLowerCase().includes(fav))) score += 3;

        return {...p, runtimeScore: score};
      });

      // ìƒìœ„ 3ê°œ ì¶”ì²œ
      scored.sort((a,b)=>b.runtimeScore - a.runtimeScore);
      const top = scored.slice(0,3);
      displayProducts(top);
      resultNote.textContent = `ì¶”ì²œ ì œí’ˆ ${top.length}ê°œë¥¼ ì°¾ì•˜ì–´ìš” â€” í™˜ê²½ ì ìˆ˜ëŠ” ë‚´ë¶€ í‰ê°€(ë†’ì„ìˆ˜ë¡ ì¹œí™˜ê²½).`;
    }

    recommendBtn.addEventListener('click', recommend);

    sampleBtn.addEventListener('click', ()=>{
      document.getElementById('skinTone').value = 'neutral';
      document.getElementById('skinType').value = 'normal';
      document.getElementById('climate').value = 'temperate';
      document.getElementById('favoriteColor').value = 'ëˆ„ë“œ';
    });

    function displayProducts(list){
      productList.innerHTML = list.map(p=>{
        return `
        <article class="product" aria-labelledby="p${p.id}">
          <div class="p-thumb" aria-hidden="true">ğŸ’š</div>
          <div class="p-meta">
            <h3 id="p${p.id}">${escapeHtml(p.name)}</h3>
            <p class="small">${escapeHtml(p.desc)}</p>
            <p class="small" style="margin-top:6px">ì¶”ì²œ ì ìˆ˜: <strong>${p.runtimeScore}</strong></p>
          </div>
          <div class="env-score" title="í™˜ê²½ ì ìˆ˜">${p.score}</div>
        </article>
        `;
      }).join('');
    }

    // ê¸°ë³¸ í‘œì‹œ (ì´ˆê¸° ì•ˆë‚´)
    productList.innerHTML = `
      <div class="muted">ì—¬ê¸°ì— ì¶”ì²œ ì œí’ˆì´ í‘œì‹œë©ë‹ˆë‹¤. ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  'ì¶”ì²œ ë°›ê¸°'ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”.</div>
    `;

    // ë³´ì•ˆ: ê°„ë‹¨í•œ escape
    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s]));
    }
  </script>
</body>
</html>
